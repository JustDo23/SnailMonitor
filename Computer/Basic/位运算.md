## 位运算

![BitwiseOperation](https://raw.githubusercontent.com/JustDo23/SnailMonitor/master/Picture/Cover/BitwiseOperation.png)

> 引言：对二进制位的运算操作。
>
> 作者：JustDo23
>
> 时间：2020年03月03日

### 01. 位运算

1. 程序中的 **`数据`** 在计算机内存中都是以 **`二进制`** 的形式 **`储存`** 的。

2. 位运算即直接对 **`二进制位`** 进行 **`操作`** 。

### 02. 原码

1. 原码即对 **`数字`** 的 **`二进制`** 表示。

2. 原码的 **`最高位`** 为 **`符号位`** ，正数为 0，负数为 1。

3. 原码 **`不能`** 直接参加运算

   ```
   正 1 原码 ： 0000 0001
   负 1 原码 ： 1000 0001
   两者相加后 ： 1000 0010
   结果十进制 ： -2
   结论：原码不能直接参与运算。
   ```

### 03. 反码

1. 反码就是 **`原码`** 除了 **`符号位之外`** 其余位全部 **`取反`** 。

2. 正数的 **`原码`** 和 **`反码`** 和 **`补码`** 完全一样。

3. 反码通常是用来 **`由原码求补码`** 或者 **`由补码求原码`** 的 **`过渡码`** 。

   ```
   正 3 原码 ： 0000 0011
   正 3 反码 ： 0000 0011
   
   负 3 原码 ： 1000 0011
   负 3 反码 ： 1111 1100
   ```

### 04. 补码

1. 正数的 **`原码`** 和 **`反码`** 和 **`补码`** 完全一样。

2. 补码是由 **`反码加1`** 求得。

3. 在 **`计算机`** 系统中，**`数值`** 一律用 **`补码`** 来 **`表示`** 和 **`存储`** 。

4. 使用补码原因：

   * 可以将 **`符号位`** 和 **`数值域`** 统一处理
   * **`加法`** 和 **`减法`** 可以统一处理（模的概念及补数的运用）

5. 简单示例：

   ```
   正 2 原码 ： 0000 0010
   负 2 补码 ： 0000 0010
   
   正 5 原码 ： 0000 0101
   负 5 原码 ： 1000 0101
   负 5 反码 ： 1111 1010
   负 5 补码 ： 1111 1011
   ```

### 05. 按位取反

1. 运算符 **`~`** 表示进行 **`按位取反`** 运算。

2. 是对 **`所有位`** 都进行 **`取反`** 操作。

3. 强调：**`数字`** 在内存中是以 **`补码`** 的形式存储的。

4. 运算示例：

   ```
   正 8 补码   ： 0000 1000
   按位取反后   ： 1111 0111
   补码-1得反码 ： 1111 0110
   数值取反得原码： 1000 1001
   十进制结果即为： -9
   
   负 5 原码 ： 1000 0101
   负 5 反码 ： 1111 1010
   负 5 补码 ： 1111 1011
   按位取反  ： 0000 0100
   即结果补码 ： 0000 0100
   正数 就不用继续算了
   十进制结果即为： 4
   ```

5. 代码验证：

   ```java
   public static void main(String[] args) {
       System.out.println("按位取反：" + ~8); // -9
       System.out.println("按位取反：" + ~-5); // 4
   }
   ```
   
6. 额外收获：

   * 求一个数 n 的相反数即为：**`(按位取反 + 1)`**
   * `(n * -1) = (~n + 1)`

7. 补充知识：

   * `原码` 经过 `反码再加1` 得到 **`补码`** 。
   * `补码` 经过 `反码再加1` 得到 **`原码`** 。

   ```
   负 5 原码 ： 1000 0101
   负 5 反码 ： 1111 1010
   负 5 补码 ： 1111 1011
   补码的反码 ： 1000 0100
   再加1得原码： 1000 0101
   ```

### 06. 按位与

1. 运算符 **`&`** 表示两数进行 **`与`** 运算。

2. 规则：只有同为 1 时，结果才为 1 。

3. 运算示例：

   ```
   正 5 补码 ： 0000 0101
   正 3 补码 ： 0000 0011
   按位与运算 ： 0000 0001
   十进制结果即为： 1
   ```

4. 用途：

   * 清零。一个数 与 0 后结果为 0 。
   * 取一个数中指定位。一个数 与1 后得到最后一位的值，可判断奇偶。

5. 代码验证：

   ```java
   public static void main(String[] args) {
       // 判断奇数偶数
       System.out.println("按位与：" + (7 & 1)); // 1
       System.out.println("按位与：" + (6 & 1)); // 0
       // 结果为范围之内
       System.out.println("按位与：" + (4 & 3)); // 0
       System.out.println("按位与：" + (5 & 3)); // 1
       System.out.println("按位与：" + (6 & 3)); // 2
       System.out.println("按位与：" + (7 & 3)); // 3
   }
   ```

6. 额外收获：

   **`number & length`** 按位 **`与`** 运算保障了 **`结果`** 一定会 **`小于等于 length`** 并且 **`大于等于 0`** 

