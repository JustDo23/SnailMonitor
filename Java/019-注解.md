## 019-注解

![JavaSE.png](https://raw.githubusercontent.com/JustDo23/SnailMonitor/master/Picture/Cover/JavaSE.png)

> 引言： Java Platform, Standard Edition.
>
> 作者：JustDo23
>
> 时间：2022年09月23日
>
> 官网：[https://www.oracle.com](https://www.oracle.com)

### 01. 注解入门

1. **简单介绍**

   * **`注释`** 英文 **`Comment`** 是程序员阅读代码的辅助信息，会被编译器直接忽略。
   * **`注解`** 英文 **`Annotation`** 是一种对元数据的标注，可以被编译器处理打包。
   * 可以理解为一种代码级别的说明。是 JDK 1.5 引入的一个特性。
   
2. **基础作用**

   * 不是程序本身，但可以对程序做出解释。
   * 可以被其他程序读取，比如编译器。
   * 可以检查约束代码，比如 `@Override` 约束方法名。

3. **代码格式**

   * 以 “@注解名称” 的形式在代码中存在的。
   * 在其后还可以添加一些参数值。

4. **使用位置**

   * 可以附加在 **`package`** 包 **`class`** 类 **`method`** 方法 **`field`** 属性 等上面。
   * 相当于给它们添加了额外的辅助信息。
   * 可以通过反射机制编程实现对这些元数据的访问。

### 02. 内置注解

1. **@Override**

   * **`重写`**。检查该方法是否是重写方法。
   * 如果发现其父类或者是实现的接口中并没有该方法时，会编译报错。

2. **@Deprecated**

   * **`过时`**。标记类或方法等过时了。
   * 表示不鼓励程序员使用这样的元素。会在编译时警告。
   * 通常元素过时，是因为它很危险或者存在更好的选择。

3. **@SuppressWarnings**

   * **`镇压警告`**。指示编译器去忽略注解中声明的警告。
   * 需要添加一个或者多个参数才能正确使用。
   * 这些参数都是已经定义好的，我们去选择使用即可。

4. **简单示例**

   ```java
   @SuppressWarnings("all")
   @SuppressWarnings("unchecked")
   @SuppressWarnings(value={"unchecked","deprecation"})
   ```

### 03. 元注解

1. **简单概述**

   * 作用在其他注解的注解，就是元注解 **`Meta-Annotation`** 。
   * Java 中定义了 4 个标准的元注解。
   * 在包路径 `java.lang.annotation` 下可以找到。

2. **@Target**

   * 用于描述注解的使用范围。
   * 可以同时指定单个或多个值。

   ```java
   public enum ElementType {
       TYPE, // 用于类、接口、枚举，但不能是注解
       FIELD, // 用于字段，包括枚举值
       METHOD, // 用于方法，但不包括构造方法
       PARAMETER, // 用于方法的参数
       CONSTRUCTOR, // 用于构造方法
       LOCAL_VARIABLE, // 用于本地变量
       ANNOTATION_TYPE, // 用于注解类型
       PACKAGE // 用于包
   }
   ```

3. **@Retention**

   * 表示需要在什么级别保存该注解信息。
   * 用于描述注解的生命周期。

   ```java
   public enum RetentionPolicy {
       SOURCE, // 源码；此类型注解，会被编译器直接丢弃。
       CLASS, // 字节码；此类型注解，会保留在字节码文件中，但JVM会忽略它。
       RUNTIME // 运行时；此类型注解，会保留在字节码文件中，JVM会读取它。
   }
   ```

4. **@Documented**

   * 说明该注解将被包含在 JavaDoc 中。

5. **@Inherited**

   * 说明子类可以继承父类中的该注解。

### 04. 自定义注解

1. **自定义流程**

   * 使用 **`@interface`** 来声明一个自定义注解。
   * 它会自动继承 **`java.lang.annotation.Annotation`** 接口。
   * 使用 `元注解` 去注解 `自定义注解` 的 `作用范围` 及 `生命周期` 等。
   * 根据需要选择添加自定义注解的参数。

2. **简单示例**

   声明定义一个注解：

   ```java
   @Target(value = {ElementType.TYPE, ElementType.METHOD})
   @Retention(RetentionPolicy.RUNTIME)
   @Documented
   public @interface SimpleAnnotation {
   
       String value(); // 配置参数。格式为： 参数类型 参数名称();
   
   }
   ```

   在代码中使用注解：

   ```java
   public class AnnotationDemo {
   
       @SimpleAnnotation("参数-自定义注解")
       public static void main(String[] args) {
   
       }
   
   }
   ```

3. **分析说明**

   * 自定义注解代码块中的每一个方法实际上都是声明了一个配置参数。
   * 参数类型只能是：基本类型、Class、String、enum 这些。
   * 如果只有一个参数成员，一般参数名为 **`value`** 。
   * 可以通过 **`default`** 来声明参数的默认值。

4. **稍微复杂**

   声明定义一个注解：

   ```java
   @Target(ElementType.METHOD)
   @Retention(RetentionPolicy.RUNTIME)
   public @interface ComplexAnnotation {
   
       String name();
   
       int age() default 23;
   
       String[] schools() default {"北京大学"};
   
   }
   ```
   
   在代码中使用注解：
   
   ```java
   public class AnnotationDemo {
   
       @ComplexAnnotation(name = "张三疯")
       public static void main(String[] args) {
   
       }
   
   }
   ```

